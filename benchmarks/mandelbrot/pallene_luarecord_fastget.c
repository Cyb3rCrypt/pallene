/* This file was generated by the Pallene compiler. Do not edit by hand */
/* Indentation and formatting courtesy of pallene/pretty.lua */

#include <string.h>

#include "pallene_core.h"

#include "lua.h"
#include "lauxlib.h"
#include "lualib.h"

#include "lapi.h"
#include "lfunc.h"
#include "lgc.h"
#include "lobject.h"
#include "lstate.h"
#include "lstring.h"
#include "ltable.h"
#include "lvm.h"

#include "math.h"

/* fixed hash layout for seed = 0
 * sizenode 2
 * pos 0	key string	str re	hash 5596
 * pos 1	key string	str im	hash 5851
 */

static void dumphashpart(lua_State *L, Table *t) {
    printf("sizenode %d\n", sizenode(t));
    for (int i = 0; i < sizenode(t); i++) {
        Node *n = gnode(t, i);
        int kt = novariant(n->u.key_tt);
        printf("pos %d\t", i);
        printf("key %s\t", ttypename(kt));
        if (kt == LUA_TSTRING) {
            TValue k;
            getnodekey(L, &k, n);
            TString *str = tsvalue(&k);
            printf("str %s\t", svalue(&k));
            printf("hash %d\t", str->hash);
        }
        printf("\n");
    }
    printf("---\n");
}

static const TValue *getstrfast(Table *t, TString *key, int hash, int pos)
{
#if 1
  if (pos < sizenode(t)) {
    Node *n = gnode(t, pos);
    if (keyisshrstr(n) && eqshrstr(keystrval(n), key))
      return gval(n);  /* that's it */
  }
#endif
  Node *n = gnode(t, lmod(hash, sizenode(t)));
  for (;;) {  /* check whether 'key' is somewhere in the chain */
    if (keyisshrstr(n) && eqshrstr(keystrval(n), key))
      return gval(n);  /* that's it */
    else {
      int nx = gnext(n);
      if (nx == 0)
        return luaH_emptyobject;  /* not found */
      n += nx;
    }
  }
}


static Table * function_new_pallene(
    lua_State * L,
    lua_Number x1 /* x */,
    lua_Number x2 /* y */
){
    CClosure * x3 = clCvalue(s2v(L->ci->func));
    Udata * x4 /* upvalue table */ = uvalue(&x3->upvalue[0]);
    UValue * x5 /* upvalue array */ = x4->uv;
    (void)x5;
    {
        luaC_condGC(L, {
        }, {
        });
        Table * x6 = luaH_new(L);
        luaH_resize(L, x6, 0, 2);
        TValue * x7 =  &x5[27].uv ;
        TString * x8 = tsvalue(x7);
        TValue x9;
        setsvalue(L, &x9, x8);
        TValue * x10 = luaH_newkey(L, x6, &x9);
        setfltvalue(x10, x1);
        TValue * x11 =  &x5[28].uv ;
        TString * x12 = tsvalue(x11);
        TValue x13;
        setsvalue(L, &x13, x12);
        TValue * x14 = luaH_newkey(L, x6, &x13);
        setfltvalue(x14, x2);
        return x6;
    }
}

static int function_new_lua(lua_State *L)
{
    lua_checkstack(L, 1);
    CClosure * x1 = clCvalue(s2v(L->ci->func));
    Udata * x2 /* upvalue table */ = uvalue(&x1->upvalue[0]);
    UValue * x3 /* upvalue array */ = x2->uv;
    (void)x3;
    StackValue* x4 = L->ci->func;
    int x5 /* nargs */ = cast_int(L->top - (x4 + 1));
    if (PALLENE_UNLIKELY(x5 != 2)) {
        pallene_runtime_arity_error(L, 2, x5);
    }
    TValue* x6 = s2v(x4 + 1);
    if (PALLENE_UNLIKELY(!ttisfloat(x6))) {
        pallene_runtime_argument_type_error(L, "x", 1, LUA_TNUMFLT, x6);
    }
    TValue* x7 = s2v(x4 + 2);
    if (PALLENE_UNLIKELY(!ttisfloat(x7))) {
        pallene_runtime_argument_type_error(L, "y", 1, LUA_TNUMFLT, x7);
    }
    lua_Number x8 = fltvalue(s2v(x4 + 1));
    lua_Number x9 = fltvalue(s2v(x4 + 2));
    Table * x10 /* ret */ = function_new_pallene(L, x8, x9);
    sethvalue(L, s2v(L->top), x10);
    api_incr_top(L);
    return 1;
}

static Table * function_clone_pallene(
    lua_State * L,
    Table * x1 /* x */
){
    lua_checkstack(L, 3);
    CClosure * x2 = clCvalue(s2v(L->ci->func));
    Udata * x3 /* upvalue table */ = uvalue(&x2->upvalue[0]);
    UValue * x4 /* upvalue array */ = x3->uv;
    (void)x4;
    {
        TValue * x6 =  &x4[27].uv ;
        TString * x7 = tsvalue(x6);
        TValue * x8 = (TValue *)getstrfast(x1, x7, 5596, 0);
        if (PALLENE_UNLIKELY(!ttisfloat(x8))) {
            pallene_runtime_lrecord_type_error(
                L, "re", 6, LUA_TNUMFLT, rawtt(x8)
            );
        }
        lua_Number x5 = fltvalue(x8);
        TValue * x10 =  &x4[28].uv ;
        TString * x11 = tsvalue(x10);
        TValue * x12 = (TValue *)getstrfast(x1, x11, 5851, 1);
        if (PALLENE_UNLIKELY(!ttisfloat(x12))) {
            pallene_runtime_lrecord_type_error(
                L, "im", 6, LUA_TNUMFLT, rawtt(x12)
            );
        }
        lua_Number x9 = fltvalue(x12);
        StackValue* x13 = L->top;
        sethvalue(L, s2v(x13), x1); x13++;
        setsvalue(L, s2v(x13), x7); x13++;
        setsvalue(L, s2v(x13), x11); x13++;
        L->top = x13;
        Table * x14 = function_new_pallene(L, x5, x9);
        L->top -= 3;
        return x14;
    }
}

static int function_clone_lua(lua_State *L)
{
    lua_checkstack(L, 1);
    CClosure * x1 = clCvalue(s2v(L->ci->func));
    Udata * x2 /* upvalue table */ = uvalue(&x1->upvalue[0]);
    UValue * x3 /* upvalue array */ = x2->uv;
    (void)x3;
    StackValue* x4 = L->ci->func;
    int x5 /* nargs */ = cast_int(L->top - (x4 + 1));
    if (PALLENE_UNLIKELY(x5 != 1)) {
        pallene_runtime_arity_error(L, 1, x5);
    }
    TValue* x6 = s2v(x4 + 1);
    if (PALLENE_UNLIKELY(!ttistable(x6))) {
        pallene_runtime_argument_type_error(L, "x", 5, LUA_TTABLE, x6);
    }
    Table * x7 = hvalue(s2v(x4 + 1));
    Table * x8 /* ret */ = function_clone_pallene(L, x7);
    sethvalue(L, s2v(L->top), x8);
    api_incr_top(L);
    return 1;
}

static Table * function_conj_pallene(
    lua_State * L,
    Table * x1 /* x */
){
    lua_checkstack(L, 3);
    CClosure * x2 = clCvalue(s2v(L->ci->func));
    Udata * x3 /* upvalue table */ = uvalue(&x2->upvalue[0]);
    UValue * x4 /* upvalue array */ = x3->uv;
    (void)x4;
    {
        TValue * x6 =  &x4[27].uv ;
        TString * x7 = tsvalue(x6);
        TValue * x8 = (TValue *)getstrfast(x1, x7, 5596, 0);
        if (PALLENE_UNLIKELY(!ttisfloat(x8))) {
            pallene_runtime_lrecord_type_error(
                L, "re", 10, LUA_TNUMFLT, rawtt(x8)
            );
        }
        lua_Number x5 = fltvalue(x8);
        TValue * x10 =  &x4[28].uv ;
        TString * x11 = tsvalue(x10);
        TValue * x12 = (TValue *)getstrfast(x1, x11, 5851, 1);
        if (PALLENE_UNLIKELY(!ttisfloat(x12))) {
            pallene_runtime_lrecord_type_error(
                L, "im", 10, LUA_TNUMFLT, rawtt(x12)
            );
        }
        lua_Number x9 = fltvalue(x12);
        lua_Number x13 = - x9;
        StackValue* x14 = L->top;
        sethvalue(L, s2v(x14), x1); x14++;
        setsvalue(L, s2v(x14), x7); x14++;
        setsvalue(L, s2v(x14), x11); x14++;
        L->top = x14;
        Table * x15 = function_new_pallene(L, x5, x13);
        L->top -= 3;
        return x15;
    }
}

static int function_conj_lua(lua_State *L)
{
    lua_checkstack(L, 1);
    CClosure * x1 = clCvalue(s2v(L->ci->func));
    Udata * x2 /* upvalue table */ = uvalue(&x1->upvalue[0]);
    UValue * x3 /* upvalue array */ = x2->uv;
    (void)x3;
    StackValue* x4 = L->ci->func;
    int x5 /* nargs */ = cast_int(L->top - (x4 + 1));
    if (PALLENE_UNLIKELY(x5 != 1)) {
        pallene_runtime_arity_error(L, 1, x5);
    }
    TValue* x6 = s2v(x4 + 1);
    if (PALLENE_UNLIKELY(!ttistable(x6))) {
        pallene_runtime_argument_type_error(L, "x", 9, LUA_TTABLE, x6);
    }
    Table * x7 = hvalue(s2v(x4 + 1));
    Table * x8 /* ret */ = function_conj_pallene(L, x7);
    sethvalue(L, s2v(L->top), x8);
    api_incr_top(L);
    return 1;
}

static Table * function_add_pallene(
    lua_State * L,
    Table * x1 /* x */,
    Table * x2 /* y */
){
    lua_checkstack(L, 6);
    CClosure * x3 = clCvalue(s2v(L->ci->func));
    Udata * x4 /* upvalue table */ = uvalue(&x3->upvalue[0]);
    UValue * x5 /* upvalue array */ = x4->uv;
    (void)x5;
    {
        TValue * x7 =  &x5[27].uv ;
        TString * x8 = tsvalue(x7);
        TValue * x9 = (TValue *)getstrfast(x1, x8, 5596, 0);
        if (PALLENE_UNLIKELY(!ttisfloat(x9))) {
            pallene_runtime_lrecord_type_error(
                L, "re", 14, LUA_TNUMFLT, rawtt(x9)
            );
        }
        lua_Number x6 = fltvalue(x9);
        TValue * x11 =  &x5[27].uv ;
        TString * x12 = tsvalue(x11);
        TValue * x13 = (TValue *)getstrfast(x2, x12, 5596, 0);
        if (PALLENE_UNLIKELY(!ttisfloat(x13))) {
            pallene_runtime_lrecord_type_error(
                L, "re", 14, LUA_TNUMFLT, rawtt(x13)
            );
        }
        lua_Number x10 = fltvalue(x13);
        lua_Number x14 = x6 + x10;
        TValue * x16 =  &x5[28].uv ;
        TString * x17 = tsvalue(x16);
        TValue * x18 = (TValue *)getstrfast(x1, x17, 5851, 1);
        if (PALLENE_UNLIKELY(!ttisfloat(x18))) {
            pallene_runtime_lrecord_type_error(
                L, "im", 14, LUA_TNUMFLT, rawtt(x18)
            );
        }
        lua_Number x15 = fltvalue(x18);
        TValue * x20 =  &x5[28].uv ;
        TString * x21 = tsvalue(x20);
        TValue * x22 = (TValue *)getstrfast(x2, x21, 5851, 1);
        if (PALLENE_UNLIKELY(!ttisfloat(x22))) {
            pallene_runtime_lrecord_type_error(
                L, "im", 14, LUA_TNUMFLT, rawtt(x22)
            );
        }
        lua_Number x19 = fltvalue(x22);
        lua_Number x23 = x15 + x19;
        StackValue* x24 = L->top;
        sethvalue(L, s2v(x24), x1); x24++;
        sethvalue(L, s2v(x24), x2); x24++;
        setsvalue(L, s2v(x24), x8); x24++;
        setsvalue(L, s2v(x24), x12); x24++;
        setsvalue(L, s2v(x24), x17); x24++;
        setsvalue(L, s2v(x24), x21); x24++;
        L->top = x24;
        Table * x25 = function_new_pallene(L, x14, x23);
        L->top -= 6;
        return x25;
    }
}

static int function_add_lua(lua_State *L)
{
    lua_checkstack(L, 1);
    CClosure * x1 = clCvalue(s2v(L->ci->func));
    Udata * x2 /* upvalue table */ = uvalue(&x1->upvalue[0]);
    UValue * x3 /* upvalue array */ = x2->uv;
    (void)x3;
    StackValue* x4 = L->ci->func;
    int x5 /* nargs */ = cast_int(L->top - (x4 + 1));
    if (PALLENE_UNLIKELY(x5 != 2)) {
        pallene_runtime_arity_error(L, 2, x5);
    }
    TValue* x6 = s2v(x4 + 1);
    if (PALLENE_UNLIKELY(!ttistable(x6))) {
        pallene_runtime_argument_type_error(L, "x", 13, LUA_TTABLE, x6);
    }
    TValue* x7 = s2v(x4 + 2);
    if (PALLENE_UNLIKELY(!ttistable(x7))) {
        pallene_runtime_argument_type_error(L, "y", 13, LUA_TTABLE, x7);
    }
    Table * x8 = hvalue(s2v(x4 + 1));
    Table * x9 = hvalue(s2v(x4 + 2));
    Table * x10 /* ret */ = function_add_pallene(L, x8, x9);
    sethvalue(L, s2v(L->top), x10);
    api_incr_top(L);
    return 1;
}

static Table * function_mul_pallene(
    lua_State * L,
    Table * x1 /* x */,
    Table * x2 /* y */
){
    lua_checkstack(L, 10);
    CClosure * x3 = clCvalue(s2v(L->ci->func));
    Udata * x4 /* upvalue table */ = uvalue(&x3->upvalue[0]);
    UValue * x5 /* upvalue array */ = x4->uv;
    (void)x5;
    {
        TValue * x7 =  &x5[27].uv ;
        TString * x8 = tsvalue(x7);
        TValue * x9 = (TValue *)getstrfast(x1, x8, 5596, 0);
        if (PALLENE_UNLIKELY(!ttisfloat(x9))) {
            pallene_runtime_lrecord_type_error(
                L, "re", 18, LUA_TNUMFLT, rawtt(x9)
            );
        }
        lua_Number x6 = fltvalue(x9);
        TValue * x11 =  &x5[27].uv ;
        TString * x12 = tsvalue(x11);
        TValue * x13 = (TValue *)getstrfast(x2, x12, 5596, 0);
        if (PALLENE_UNLIKELY(!ttisfloat(x13))) {
            pallene_runtime_lrecord_type_error(
                L, "re", 18, LUA_TNUMFLT, rawtt(x13)
            );
        }
        lua_Number x10 = fltvalue(x13);
        lua_Number x14 = x6 * x10;
        TValue * x16 =  &x5[28].uv ;
        TString * x17 = tsvalue(x16);
        TValue * x18 = (TValue *)getstrfast(x1, x17, 5851, 1);
        if (PALLENE_UNLIKELY(!ttisfloat(x18))) {
            pallene_runtime_lrecord_type_error(
                L, "im", 18, LUA_TNUMFLT, rawtt(x18)
            );
        }
        lua_Number x15 = fltvalue(x18);
        TValue * x20 =  &x5[28].uv ;
        TString * x21 = tsvalue(x20);
        TValue * x22 = (TValue *)getstrfast(x2, x21, 5851, 1);
        if (PALLENE_UNLIKELY(!ttisfloat(x22))) {
            pallene_runtime_lrecord_type_error(
                L, "im", 18, LUA_TNUMFLT, rawtt(x22)
            );
        }
        lua_Number x19 = fltvalue(x22);
        lua_Number x23 = x15 * x19;
        lua_Number x24 = x14 - x23;
        TValue * x26 =  &x5[27].uv ;
        TString * x27 = tsvalue(x26);
        TValue * x28 = (TValue *)getstrfast(x1, x27, 5596, 0);
        if (PALLENE_UNLIKELY(!ttisfloat(x28))) {
            pallene_runtime_lrecord_type_error(
                L, "re", 18, LUA_TNUMFLT, rawtt(x28)
            );
        }
        lua_Number x25 = fltvalue(x28);
        TValue * x30 =  &x5[28].uv ;
        TString * x31 = tsvalue(x30);
        TValue * x32 = (TValue *)getstrfast(x2, x31, 5851, 1);
        if (PALLENE_UNLIKELY(!ttisfloat(x32))) {
            pallene_runtime_lrecord_type_error(
                L, "im", 18, LUA_TNUMFLT, rawtt(x32)
            );
        }
        lua_Number x29 = fltvalue(x32);
        lua_Number x33 = x25 * x29;
        TValue * x35 =  &x5[28].uv ;
        TString * x36 = tsvalue(x35);
        TValue * x37 = (TValue *)getstrfast(x1, x36, 5851, 1);
        if (PALLENE_UNLIKELY(!ttisfloat(x37))) {
            pallene_runtime_lrecord_type_error(
                L, "im", 18, LUA_TNUMFLT, rawtt(x37)
            );
        }
        lua_Number x34 = fltvalue(x37);
        TValue * x39 =  &x5[27].uv ;
        TString * x40 = tsvalue(x39);
        TValue * x41 = (TValue *)getstrfast(x2, x40, 5596, 0);
        if (PALLENE_UNLIKELY(!ttisfloat(x41))) {
            pallene_runtime_lrecord_type_error(
                L, "re", 18, LUA_TNUMFLT, rawtt(x41)
            );
        }
        lua_Number x38 = fltvalue(x41);
        lua_Number x42 = x34 * x38;
        lua_Number x43 = x33 + x42;
        StackValue* x44 = L->top;
        sethvalue(L, s2v(x44), x1); x44++;
        sethvalue(L, s2v(x44), x2); x44++;
        setsvalue(L, s2v(x44), x8); x44++;
        setsvalue(L, s2v(x44), x12); x44++;
        setsvalue(L, s2v(x44), x17); x44++;
        setsvalue(L, s2v(x44), x21); x44++;
        setsvalue(L, s2v(x44), x27); x44++;
        setsvalue(L, s2v(x44), x31); x44++;
        setsvalue(L, s2v(x44), x36); x44++;
        setsvalue(L, s2v(x44), x40); x44++;
        L->top = x44;
        Table * x45 = function_new_pallene(L, x24, x43);
        L->top -= 10;
        return x45;
    }
}

static int function_mul_lua(lua_State *L)
{
    lua_checkstack(L, 1);
    CClosure * x1 = clCvalue(s2v(L->ci->func));
    Udata * x2 /* upvalue table */ = uvalue(&x1->upvalue[0]);
    UValue * x3 /* upvalue array */ = x2->uv;
    (void)x3;
    StackValue* x4 = L->ci->func;
    int x5 /* nargs */ = cast_int(L->top - (x4 + 1));
    if (PALLENE_UNLIKELY(x5 != 2)) {
        pallene_runtime_arity_error(L, 2, x5);
    }
    TValue* x6 = s2v(x4 + 1);
    if (PALLENE_UNLIKELY(!ttistable(x6))) {
        pallene_runtime_argument_type_error(L, "x", 17, LUA_TTABLE, x6);
    }
    TValue* x7 = s2v(x4 + 2);
    if (PALLENE_UNLIKELY(!ttistable(x7))) {
        pallene_runtime_argument_type_error(L, "y", 17, LUA_TTABLE, x7);
    }
    Table * x8 = hvalue(s2v(x4 + 1));
    Table * x9 = hvalue(s2v(x4 + 2));
    Table * x10 /* ret */ = function_mul_pallene(L, x8, x9);
    sethvalue(L, s2v(L->top), x10);
    api_incr_top(L);
    return 1;
}

static lua_Number function_norm2_pallene(
    lua_State * L,
    Table * x1 /* x */
){
    CClosure * x2 = clCvalue(s2v(L->ci->func));
    Udata * x3 /* upvalue table */ = uvalue(&x2->upvalue[0]);
    UValue * x4 /* upvalue array */ = x3->uv;
    (void)x4;
    {
        TValue * x6 =  &x4[27].uv ;
        TString * x7 = tsvalue(x6);
        TValue * x8 = (TValue *)getstrfast(x1, x7, 5596, 0);
        if (PALLENE_UNLIKELY(!ttisfloat(x8))) {
            pallene_runtime_lrecord_type_error(
                L, "re", 22, LUA_TNUMFLT, rawtt(x8)
            );
        }
        lua_Number x5 = fltvalue(x8);
        TValue * x10 =  &x4[27].uv ;
        TString * x11 = tsvalue(x10);
        TValue * x12 = (TValue *)getstrfast(x1, x11, 5596, 0);
        if (PALLENE_UNLIKELY(!ttisfloat(x12))) {
            pallene_runtime_lrecord_type_error(
                L, "re", 22, LUA_TNUMFLT, rawtt(x12)
            );
        }
        lua_Number x9 = fltvalue(x12);
        lua_Number x13 = x5 * x9;
        TValue * x15 =  &x4[28].uv ;
        TString * x16 = tsvalue(x15);
        TValue * x17 = (TValue *)getstrfast(x1, x16, 5851, 1);
        if (PALLENE_UNLIKELY(!ttisfloat(x17))) {
            pallene_runtime_lrecord_type_error(
                L, "im", 22, LUA_TNUMFLT, rawtt(x17)
            );
        }
        lua_Number x14 = fltvalue(x17);
        TValue * x19 =  &x4[28].uv ;
        TString * x20 = tsvalue(x19);
        TValue * x21 = (TValue *)getstrfast(x1, x20, 5851, 1);
        if (PALLENE_UNLIKELY(!ttisfloat(x21))) {
            pallene_runtime_lrecord_type_error(
                L, "im", 22, LUA_TNUMFLT, rawtt(x21)
            );
        }
        lua_Number x18 = fltvalue(x21);
        lua_Number x22 = x14 * x18;
        lua_Number x23 = x13 + x22;
        return x23;
    }
}

static int function_norm2_lua(lua_State *L)
{
    lua_checkstack(L, 1);
    CClosure * x1 = clCvalue(s2v(L->ci->func));
    Udata * x2 /* upvalue table */ = uvalue(&x1->upvalue[0]);
    UValue * x3 /* upvalue array */ = x2->uv;
    (void)x3;
    StackValue* x4 = L->ci->func;
    int x5 /* nargs */ = cast_int(L->top - (x4 + 1));
    if (PALLENE_UNLIKELY(x5 != 1)) {
        pallene_runtime_arity_error(L, 1, x5);
    }
    TValue* x6 = s2v(x4 + 1);
    if (PALLENE_UNLIKELY(!ttistable(x6))) {
        pallene_runtime_argument_type_error(L, "x", 21, LUA_TTABLE, x6);
    }
    Table * x7 = hvalue(s2v(x4 + 1));
    lua_Number x8 /* ret */ = function_norm2_pallene(L, x7);
    setfltvalue(s2v(L->top), x8);
    api_incr_top(L);
    return 1;
}

static lua_Number function_abs_pallene(
    lua_State * L,
    Table * x1 /* x */
){
    lua_checkstack(L, 1);
    CClosure * x2 = clCvalue(s2v(L->ci->func));
    Udata * x3 /* upvalue table */ = uvalue(&x2->upvalue[0]);
    UValue * x4 /* upvalue array */ = x3->uv;
    (void)x4;
    {
        StackValue* x5 = L->top;
        sethvalue(L, s2v(x5), x1); x5++;
        L->top = x5;
        lua_Number x6 = function_norm2_pallene(L, x1);
        L->top -= 1;
        return x6;
    }
}

static int function_abs_lua(lua_State *L)
{
    lua_checkstack(L, 1);
    CClosure * x1 = clCvalue(s2v(L->ci->func));
    Udata * x2 /* upvalue table */ = uvalue(&x1->upvalue[0]);
    UValue * x3 /* upvalue array */ = x2->uv;
    (void)x3;
    StackValue* x4 = L->ci->func;
    int x5 /* nargs */ = cast_int(L->top - (x4 + 1));
    if (PALLENE_UNLIKELY(x5 != 1)) {
        pallene_runtime_arity_error(L, 1, x5);
    }
    TValue* x6 = s2v(x4 + 1);
    if (PALLENE_UNLIKELY(!ttistable(x6))) {
        pallene_runtime_argument_type_error(L, "x", 25, LUA_TTABLE, x6);
    }
    Table * x7 = hvalue(s2v(x4 + 1));
    lua_Number x8 /* ret */ = function_abs_pallene(L, x7);
    setfltvalue(s2v(L->top), x8);
    api_incr_top(L);
    return 1;
}

int luaopen_benchmarks_mandelbrot_pallene_luarecord_fastget(lua_State *L)
{
    lua_checkstack(L, 4);
    /* Allocate upvalue table */
    /* ---------------------- */
    Udata * x1 = luaS_newudata(L, 0, 36);
    UValue * x2 = x1->uv;
    /* Initialize upvalues */
    /* ------------------- */
    TString * x3 = luaS_new(L, "__index");
    setsvalue(L,  &x2[0].uv , x3);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x3))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x4 = luaS_new(L, "__newindex");
    setsvalue(L,  &x2[1].uv , x4);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x4))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x5 = luaS_new(L, "__metatable");
    setsvalue(L,  &x2[2].uv , x5);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x5))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x6 = luaS_new(L, "re");
    setsvalue(L,  &x2[3].uv , x6);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x6))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x7 = luaS_new(L, "im");
    setsvalue(L,  &x2[4].uv , x7);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x7))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x8 = luaS_new(L, "re");
    setsvalue(L,  &x2[5].uv , x8);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x8))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x9 = luaS_new(L, "im");
    setsvalue(L,  &x2[6].uv , x9);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x9))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x10 = luaS_new(L, "re");
    setsvalue(L,  &x2[7].uv , x10);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x10))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x11 = luaS_new(L, "im");
    setsvalue(L,  &x2[8].uv , x11);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x11))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x12 = luaS_new(L, "re");
    setsvalue(L,  &x2[9].uv , x12);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x12))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x13 = luaS_new(L, "im");
    setsvalue(L,  &x2[10].uv , x13);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x13))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x14 = luaS_new(L, "re");
    setsvalue(L,  &x2[11].uv , x14);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x14))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x15 = luaS_new(L, "im");
    setsvalue(L,  &x2[12].uv , x15);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x15))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x16 = luaS_new(L, "re");
    setsvalue(L,  &x2[13].uv , x16);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x16))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x17 = luaS_new(L, "im");
    setsvalue(L,  &x2[14].uv , x17);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x17))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x18 = luaS_new(L, "re");
    setsvalue(L,  &x2[15].uv , x18);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x18))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x19 = luaS_new(L, "im");
    setsvalue(L,  &x2[16].uv , x19);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x19))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x20 = luaS_new(L, "re");
    setsvalue(L,  &x2[17].uv , x20);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x20))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x21 = luaS_new(L, "im");
    setsvalue(L,  &x2[18].uv , x21);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x21))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x22 = luaS_new(L, "re");
    setsvalue(L,  &x2[19].uv , x22);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x22))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x23 = luaS_new(L, "im");
    setsvalue(L,  &x2[20].uv , x23);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x23))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x24 = luaS_new(L, "re");
    setsvalue(L,  &x2[21].uv , x24);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x24))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x25 = luaS_new(L, "im");
    setsvalue(L,  &x2[22].uv , x25);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x25))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x26 = luaS_new(L, "re");
    setsvalue(L,  &x2[23].uv , x26);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x26))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x27 = luaS_new(L, "im");
    setsvalue(L,  &x2[24].uv , x27);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x27))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x28 = luaS_new(L, "re");
    setsvalue(L,  &x2[25].uv , x28);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x28))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x29 = luaS_new(L, "im");
    setsvalue(L,  &x2[26].uv , x29);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x29))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x30 = luaS_new(L, "re");
    setsvalue(L,  &x2[27].uv , x30);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x30))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    TString * x31 = luaS_new(L, "im");
    setsvalue(L,  &x2[28].uv , x31);
    if (isblack(obj2gco(x1)) && iswhite(obj2gco(x31))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    /* new */
    CClosure* x32 = luaF_newCclosure(L, 1);
    x32->f = function_new_lua;
    setuvalue(L, &x32->upvalue[0], x1);
    TValue x33; setclCvalue(L, &x33, x32);
    setobj(L,  &x2[29].uv , &x33);
    if (iscollectable(&x33) && isblack(obj2gco(x1)) && iswhite(gcvalue(&x33))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    /* clone */
    CClosure* x34 = luaF_newCclosure(L, 1);
    x34->f = function_clone_lua;
    setuvalue(L, &x34->upvalue[0], x1);
    TValue x35; setclCvalue(L, &x35, x34);
    setobj(L,  &x2[30].uv , &x35);
    if (iscollectable(&x35) && isblack(obj2gco(x1)) && iswhite(gcvalue(&x35))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    /* conj */
    CClosure* x36 = luaF_newCclosure(L, 1);
    x36->f = function_conj_lua;
    setuvalue(L, &x36->upvalue[0], x1);
    TValue x37; setclCvalue(L, &x37, x36);
    setobj(L,  &x2[31].uv , &x37);
    if (iscollectable(&x37) && isblack(obj2gco(x1)) && iswhite(gcvalue(&x37))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    /* add */
    CClosure* x38 = luaF_newCclosure(L, 1);
    x38->f = function_add_lua;
    setuvalue(L, &x38->upvalue[0], x1);
    TValue x39; setclCvalue(L, &x39, x38);
    setobj(L,  &x2[32].uv , &x39);
    if (iscollectable(&x39) && isblack(obj2gco(x1)) && iswhite(gcvalue(&x39))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    /* mul */
    CClosure* x40 = luaF_newCclosure(L, 1);
    x40->f = function_mul_lua;
    setuvalue(L, &x40->upvalue[0], x1);
    TValue x41; setclCvalue(L, &x41, x40);
    setobj(L,  &x2[33].uv , &x41);
    if (iscollectable(&x41) && isblack(obj2gco(x1)) && iswhite(gcvalue(&x41))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    /* norm2 */
    CClosure* x42 = luaF_newCclosure(L, 1);
    x42->f = function_norm2_lua;
    setuvalue(L, &x42->upvalue[0], x1);
    TValue x43; setclCvalue(L, &x43, x42);
    setobj(L,  &x2[34].uv , &x43);
    if (iscollectable(&x43) && isblack(obj2gco(x1)) && iswhite(gcvalue(&x43))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    /* abs */
    CClosure* x44 = luaF_newCclosure(L, 1);
    x44->f = function_abs_lua;
    setuvalue(L, &x44->upvalue[0], x1);
    TValue x45; setclCvalue(L, &x45, x44);
    setobj(L,  &x2[35].uv , &x45);
    if (iscollectable(&x45) && isblack(obj2gco(x1)) && iswhite(gcvalue(&x45))) {
        luaC_barrierback_(L, obj2gco(x1));
    }
    /* Create exports table */
    /* -------------------- */
    StackValue* x46 = L->top;
    setuvalue(L, s2v(x46), x1); x46++;
    L->top = x46;
    lua_createtable(L, 0, 7);
    lua_pushstring(L, "new");
    setobj(L, s2v(L->top),  &x2[29].uv ); api_incr_top(L);
    lua_settable(L, -3);
    lua_pushstring(L, "clone");
    setobj(L, s2v(L->top),  &x2[30].uv ); api_incr_top(L);
    lua_settable(L, -3);
    lua_pushstring(L, "conj");
    setobj(L, s2v(L->top),  &x2[31].uv ); api_incr_top(L);
    lua_settable(L, -3);
    lua_pushstring(L, "add");
    setobj(L, s2v(L->top),  &x2[32].uv ); api_incr_top(L);
    lua_settable(L, -3);
    lua_pushstring(L, "mul");
    setobj(L, s2v(L->top),  &x2[33].uv ); api_incr_top(L);
    lua_settable(L, -3);
    lua_pushstring(L, "norm2");
    setobj(L, s2v(L->top),  &x2[34].uv ); api_incr_top(L);
    lua_settable(L, -3);
    lua_pushstring(L, "abs");
    setobj(L, s2v(L->top),  &x2[35].uv ); api_incr_top(L);
    lua_settable(L, -3);
    return 1;
}

